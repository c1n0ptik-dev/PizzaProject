<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link rel="stylesheet" href="../../static/css/overview.css" />
    <link
      rel="shortcut icon"
      href="../../static/img/favicon.png"
      type="image/x-icon"
    />
  </head>
  <body>
    <!-- Header Section -->
    <header>
      <div class="header_container">
        <div><a href="aboutus">About Us</a></div>
        <div><a href="menu">Menu</a></div>
        <div>
          <img
            src="../../static/img/front_logo.png"
            class="main_logo"
            alt="Logo"
          />
        </div>
        <div><a href="basket">Basket</a></div>
        <div><a href="#">Account</a></div>
      </div>
    </header>

    <!-- Main Cart Content -->
    <div class="CartContainer">
      <div class="Header">
        <h3 class="Heading">Shopping Cart</h3>
        <form method="post">
        <button class="rem-button" name="delete_all" value="pressed">
          <h5 class="Action">Remove all</h5>
        </button>
        </form>
      </div>
      {% if data != [] %}
            {% set prices = [] %}

            {% for row in data %}
            {% if prices.append(row[4]) %} {% endif %}
                <div class="Cart-Items">
                  <div class="image-box">
                    <img src="../../static/img/{{ row[2] }}.png" style="height: 120px" />
                  </div>
                  <div class="about">
                    <h1 class="title">{{ row[1] }}</h1>
                    <h3 class="subtitle">{{ row[3] }}</h3>
                  </div>
                  <div class="counter"></div>
                  <div class="prices">
                    <div class="amount">${{ row[4] }}</div>
                    <form method="post">
                    <input type="hidden" name="item_delete_id" value="{{ row[0] }}" />
                    <button class ="rem-button" type="submit" name="delete" value="pressed">
                      <div class="remove"><u>Remove</u></div>
                    </button>
                    </form>
                  </div>
                </div>

            {% endfor %}

              <div class="checkout">
                <div class="total">

                    <div>
                      <div class="Subtotal">Sub-Total</div>
                      <div class="items">{{ prices | length }} items</div>
                    </div>
                    {% set num_array = prices | to_int_list %}
                    <div class="total-amount">{{ num_array | sum }}</div>
                  </div>
                  <center>
                    <button class="button">Checkout</button>
                  </center>
                </div>
     {% else %}
            <div style="display: flex; justify-items: center; text-align: center ">
              <div>
                <p>No items in basket</p>
              </div>
            </div>
      {% endif %}
    </div>
  </body>
</html>
